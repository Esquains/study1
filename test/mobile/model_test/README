# What is this?
Python scripts in this folder are used to generate lite interpreter models
for Android and iOS simulator tests. The goal of these tests is to detect
changes that would break existing mobile models that are generated by
ealier PyTorch versions. These scripts consist of basic PyTorch public API
usages, based on the API doc (https://pytorch.org/docs/stable/), and are
grouped in a similar way (e.g., tensor creation, math reduction, nn pooling,
static quantization etc).

The generated models are located at
Android: android/pytorch_android/src/androidTest/assets/
iOS: ios/TestApp/models/
These test models will be executed in Android and iOS simulator tests. Note
that we only check if there's error in model execution, but not the correctness.

# Update test model
If for any reason a test model needs to be updated, run this script:
```
python test/mobile/model_test/gen_test_model.py <model_name_without_suffix>
```
For example,
```
python test/mobile/model_test/gen_test_model.py reduction_ops
python test/mobile/model_test/gen_test_model.py mobilenet_v2
```
It will udpate the specific model for both Android and iOS tests

We can also update all test models for android and iOS
```
python test/mobile/model_test/gen_test_model.py android
python test/mobile/model_test/gen_test_model.py ios
```

# Coverage Data
The coverage number reported in simulator tests is based on how many root ops
used in (Meta's) production are included in these test models. The list of
production ops is regularly synced by Meta employee, using this script
```
python test/mobile/model_test/update_production_ops.py ~/fbsource/xplat/pytorch_models/build/all_mobile_model_configs.yaml
```
The full list of covered/uncovered ops can be found in:
https://github.com/pytorch/pytorch/blob/master/test/mobile/model_test/coverage.yaml
